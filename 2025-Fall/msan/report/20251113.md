# Lactobacillus plantarum ìœ ì „ì²´ ë¶„ì„ ì›Œí¬í”Œë¡œìš°

ì´ ë¬¸ì„œëŠ” `AAI.py` ìŠ¤í¬ë¦½íŠ¸ì™€ `chewBBACA`ë¥¼ ì´ìš©í•œ *Lactobacillus plantarum* ìœ ì „ì²´ ë¶„ì„ íŒŒì´í”„ë¼ì¸ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

---

## ğŸ”§ 1. í™˜ê²½ ì„¤ì • (Installation)

ë¶„ì„ì„ ìœ„í•´ ë‘ ê°œì˜ ë…ë¦½ëœ Conda í™˜ê²½ì„ ì„¤ì •í•©ë‹ˆë‹¤.

### 1.1. AAI ë¶„ì„ í™˜ê²½ (`aai_env`)

`comparem` ë° ê´€ë ¨ ì‹œê°í™” ë„êµ¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
# í™˜ê²½ ìƒì„± ë° í™œì„±í™”
conda create -n aai_env python=3.11 -y
conda activate aai_env

# í•„ìš” íŒ¨í‚¤ì§€ ì„¤ì¹˜
conda install -c conda-forge -c bioconda pandas numpy matplotlib seaborn scipy comparem mlst -y
```

### 1.2. cgMLST ë¶„ì„ í™˜ê²½ (`chewbbaca_env`)

`chewBBACA` ì „ìš© í™˜ê²½ì„ ì„¤ì •í•©ë‹ˆë‹¤.

```bash
# ê¸°ì¡´ í™˜ê²½ ì™„ì „ ì‚­ì œ (ê¶Œì¥)
conda deactivate
conda remove -n chewbbaca_env --all -y

# í™˜ê²½ ìƒì„± ë° í™œì„±í™”
conda create -n chewbbaca_env python=3.8 -y
conda activate chewbbaca_env

# chewBBACA ì„¤ì¹˜
conda install -c conda-forge -c bioconda biopython=1.79 requests=2.25 chewbbaca -y
```

---

## ğŸš€ 2. ë¶„ì„ ì‹¤í–‰ (Execution)

### STEP 1: AAI ë¶„ì„ ì‹¤í–‰

> **âš ï¸ ì‚¬ì „ ì¤€ë¹„**
> `AAI.py` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì—´ê³  ìƒë‹¨ì˜ ê²½ë¡œ ë³€ìˆ˜(`FNA_DIR`, `FAA_DIR` ë“±)ë¥¼ ìì‹ ì˜ í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.

`aai_env` í™˜ê²½ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
conda activate aai_env
python AAI.py
```

### STEP 2: cgMLST (chewBBACA) ë¶„ì„ ì‹¤í–‰

AAI ë¶„ì„ì´ ì™„ë£Œëœ í›„, `chewbbaca_env` í™˜ê²½ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

> **âš ï¸ ì¤‘ìš”**
> ì•„ë˜ ëª¨ë“  ëª…ë ¹ì–´ì— í¬í•¨ëœ íŒŒì¼ ê²½ë¡œëŠ” **ë°˜ë“œì‹œ ì‹¤ì œ ì‚¬ìš©ì í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •**í•´ì•¼ í•©ë‹ˆë‹¤.

```bash
# 1. chewBBACA í™˜ê²½ í™œì„±í™”
conda activate chewbbaca_env

# 2. ì‘ì—… í´ë” ìƒì„± ë° ì´ë™
# AAI ë¶„ì„ ê²°ê³¼ê°€ ì €ì¥ëœ í´ë”ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.
mkdir -p /mnt/c/Users/AN/Desktop/gDrive/Study/Leacture/IBT610/Result_sample/output_lplantarum_aai
cd /mnt/c/Users/AN/Desktop/gDrive/Study/Leacture/IBT610/Result_sample/output_lplantarum_aai

# 3. ìŠ¤í‚¤ë§ˆ ìƒì„± (CreateSchema)
# ì „ì²´ ìœ ì „ì²´(.fna) íŒŒì¼ë¡œë¶€í„° cgMLST ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
chewBBACA.py CreateSchema \
  -i /mnt/c/Users/AN/Desktop/gDrive/Study/Leacture/IBT610/Result_sample \
  -o lplantarum_schema_new \
  --cpu 12

# 4. ìŠ¤í‚¤ë§ˆ ì¤€ë¹„ (PrepExternalSchema)
# ìƒì„±ëœ ìŠ¤í‚¤ë§ˆë¥¼ Allele Callingì— ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë³€í™˜í•©ë‹ˆë‹¤.
chewBBACA.py PrepExternalSchema \
  -i ./lplantarum_schema_new/schema_seed/short \
  -o ./lplantarum_schema_ready \
  --cpu 12

# 5. Allele Calling ìˆ˜í–‰
# Prokkaë¡œ ì˜ˆì¸¡ëœ ë‹¨ë°±ì§ˆ íŒŒì¼ì„ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ allelic profileì„ ê²°ì •í•©ë‹ˆë‹¤.
chewBBACA.py AlleleCall \
  -i /mnt/c/Users/AN/Desktop/gDrive/Study/Leacture/IBT610/Prokka_faa/matched_prokka_faa \
  -g ./lplantarum_schema_ready \
  -o chewbbaca_results \
  --cpu 12 \
  --bsr 0.6
```

---

ëª¨ë“  ë¶„ì„ ê²°ê³¼ëŠ” `output_lplantarum_aai` í´ë” ë‚´ì— ìµœì¢…ì ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
